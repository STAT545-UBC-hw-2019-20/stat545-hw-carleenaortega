---
title: 'HW03: dplyr/ggplot2 Part II'
author: "Carleena Ortega"
date: "29/09/2019"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
suppressPackageStartupMessages((library(dplyr)))
suppressPackageStartupMessages((library(ggplot2)))
suppressPackageStartupMessages((library(gapminder)))
suppressPackageStartupMessages(library(knitr))
suppressPackageStartupMessages(library(kableExtra))
knitr::opts_chunk$set(fig.align = "center")
```

# Instructions

Pick three of the six tasks below, and produce:

* a tibble, using dplyr as your data manipulation tool
* an accompanying plot of data from the tibble, using ggplot2 as your visualization tool
* some dialogue about what your tables/figures show (doesn’t have to be much).

Or, make up your own task(s)! If you want to do something comparable but different, i.e. swap one quantitative variable for another, be my guest! If you are feeling inspired and curious, then we’re doing this right. Go for it. Just write down the task that you are now doing. Between the dplyr coverage in class and the list below, I think you get the idea.


# Tasks

## Task Option 1
Report the absolute and/or relative abundance of countries with low life expectancy over time by continent: Compute some measure of worldwide life expectancy – you decide – a mean or median or some other quantile or perhaps your current age. Then determine how many countries on each continent have a life expectancy less than this benchmark, for each year.

```{r}
t1<-gapminder %>% 
  select(continent,year,lifeExp) %>% 
  group_by(year,continent) %>% 
  filter(lifeExp<60) %>%
  group_by(year,continent) %>% 
  summarize(low_LE=length(continent))
  knitr::kable(t1) %>% 
    kable_styling("basic")
  
```

```{r}
ggplot(t1)+
  geom_point(aes(year,low_LE,group=continent,color=continent))+
  labs(x="Year",y="Number of Countries",title="The number of Countries in Each Continent with Life Expectancies 
    Less than 60 Years")
```

## **Task Option 2**
Get the maximum and minimum of GDP per capita for all continents.
```{r}
t2<-gapminder %>% 
  select(continent,gdpPercap) %>% 
  group_by(continent) %>%
  arrange(continent)%>%
#mutate(min=min(gdpPercap),max=max(gdpPercap)) #if this is chosen instead of summarize, can plot but table shows multiple entries per continent
  summarize(min_GDP=min(gdpPercap),max_GDP=max(gdpPercap)) #if this is chosen instead of mutate, cannot plot the next. but allows a summarized table
knitr::kable(t2) %>% 
  kable_styling("striped",position="center")
#?is it possible to add the tibble and ggplot in one string?
```
```{r}
ggplot(t2)+
  geom_point(aes(continent, min_GDP), color = 'red') + geom_point(aes(continent,max_GDP), color = 'green')+
  labs(x="Continents",y="GDP per capita",title="Maximum and Minimum GDP per capita of Continents")+
  theme_get()
#add legend for green and red
```


## **Task Option 3**
Look at the spread of GDP per capita within the continents.
```{r}
gapminder %>% 
  select(continent,gdpPercap) %>% 
  group_by(continent) %>%
  arrange(continent)
```

```{r}
gapminder %>% 
  select(continent,gdpPercap) %>% 
  group_by(continent) %>%
  arrange(continent)%>%
  ggplot()+
  geom_boxplot(aes(continent,gdpPercap)) +
  scale_y_log10()+
  labs(x="Continents",y="GDP per capita",title="GDP per capita of Continents")+
  theme_get()
#add how to put the y range in better format
```


## Task Option 4
Compute a trimmed mean of life expectancy for different years. Or a weighted mean, weighting by population. Just try something other than the plain vanilla mean.

## **Task Option 5**
How is life expectancy changing over time on different continents?

```{r}

```

## Task Option 6
Find countries with interesting stories. Open-ended and, therefore, hard. Promising but unsuccessful attempts are encouraged. This will generate interesting questions to follow up on in class.

